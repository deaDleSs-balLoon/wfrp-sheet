# Инструкция по установке всех модулей

## Модули

### JavaScript
1. **app.js** - оригинальный файл Gooz (без изменений)
2. **xp-calculator.js** - модуль с функционалом вычислений опыта
3. **highlight-toggle.js** - модуль с функционалом подсветки рядов в таблицах

### CSS
1. **app.css** - оригинальный файл Gooz (без изменений)
2. **xp-calculator.css** - (если нужны стили для опыта, пока нет)
3. **highlight-toggle.css** - стили для кнопок подсветки

---

## Установка

### Шаг 1: Замените файлы на оригинальные

- Используйте оригинальный `app.js` (Gooz версия)
- Используйте оригинальный `app.css` (Gooz версия)

### Шаг 2: Добавьте модули

Скопируйте в папку проекта:
- `xp-calculator.js`
- `highlight-toggle.js`
- `highlight-toggle.css`

### Шаг 3: Подключите в HTML

В файле `sheet.html`:

**JavaScript - в конце body перед закрывающим тегом:**
```html
<script src="app.js"></script>
<script src="xp-calculator.js"></script>
<script src="highlight-toggle.js"></script>
```

**CSS - в head:**
```html
<link rel="stylesheet" href="app.css">
<link rel="stylesheet" href="highlight-toggle.css">
```

### Шаг 4: Измените типы полей опыта в HTML

В файле `sheet.html` найдите поля Experience и измените:

```html
<!-- Было: -->
<input type="number" id="current-xp" name="current-xp">
<input type="number" id="spent-xp" name="spent-xp">

<!-- Стало: -->
<input type="text" id="current-xp" name="current-xp" class="simple" inputmode="numeric">
<input type="text" id="spent-xp" name="spent-xp" class="simple" inputmode="numeric">
```

---

## Функционал

### XP Calculator (xp-calculator.js)

Поддерживает три формата ввода в полях `current-xp` и `spent-xp`:

#### 1. Абсолютное значение
```
Ввод: 150
Результат: поле становится 150
```

#### 2. Короткая форма (начинается с оператора)
```
Текущее: 100 → Ввод: +20 → Результат: 120
Текущее: 100 → Ввод: -30 → Результат: 70
```

#### 3. Полная форма (выражение)
```
Ввод: 100+20 → Результат: 120
Ввод: 150-50 → Результат: 100
```

**Синхронизация spent-xp и current-xp:**
- При изменении spent-xp опыт перемещается между current-xp и spent-xp
- total-xp остаётся неизменным
- Сохраняются только вычисленные значения (не выражения)

### Highlight Toggle (highlight-toggle.js, highlight-toggle.css)

Функционал подсветки рядов в таблицах:

- Кнопка хайлайта появляется при наведении
- Кликайте на строку таблицы чтобы активировать подсветку
- Кликайте на другую строку чтобы переместить подсветку
- Кликайте на пустое место чтобы скрыть подсветку

**Стили:**
- `.highlight-toggle` - кнопка подсветки
- `.hl-wrapper-checkbox` - контейнер для чекбокса
- `.hl-charac` - подсветка для таблицы характеристик
- `.hl-wrapper-name` - имя для подсветки

---

## Обновление проекта от Gooz

При обновлении:

1. Скачайте новые версии `app.js` и `app.css` от Gooz
2. Замените свои файлы новыми (ваши изменения находятся в отдельных модулях)
3. Убедитесь что подключены оба файла в HTML
4. Модули остаются без изменений - конфликтов не будет

**Порядок подключения JS критичен:**
```html
<script src="app.js"></script>        <!-- Основной файл -->
<script src="xp-calculator.js"></script>     <!-- Расширения -->
<script src="highlight-toggle.js"></script>  <!-- Расширения -->
```

---

## Файловая структура

```
проект/
├── app.js                    (оригинальный Gooz)
├── app.css                   (оригинальный Gooz)
├── xp-calculator.js          (наш модуль)
├── highlight-toggle.js       (наш модуль)
├── highlight-toggle.css      (наш модуль)
├── sheet.html                (с подключением всех файлов)
├── index.html
└── ... другие файлы
```

---

## Отладка

### Console логи

Оба модуля выводят логи при инициализации:
- `"XP Calculator initialized"`
- `"Highlight Toggle Module initialized"`

### Проверка подключения

Откройте F12 (DevTools) → Console и проверьте:
1. Нет ошибок при загрузке
2. Есть оба лога инициализации
3. Функции работают корректно

### Проблемы

**Модули не работают:**
- Проверьте что подключены все три файла .js
- Проверьте порядок подключения (app.js первым)
- Проверьте что нет синтаксических ошибок в консоли

**Стили не применяются:**
- Проверьте что подключен `highlight-toggle.css`
- Проверьте в DevTools → Elements что стили загружены
- Очистите кеш браузера (Ctrl+Shift+Delete)

---

## Благодаря модульной архитектуре:

✅ **Легко обновлять** - замените app.js и app.css на новые версии  
✅ **Нет конфликтов** - ваши изменения в отдельных модулях  
✅ **Модульность** - можно отключить любой модуль, убрав одну строку из HTML  
✅ **Чистота** - оригинальный код остаётся нетронутым  
✅ **Масштабируемость** - легко добавить новые модули в будущем
